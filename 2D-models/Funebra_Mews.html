<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Funebra™ Mews — PNG Render</title>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<script type="importmap">
{
  "imports": {
    "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
    "funebra": "https://funebra.github.io/math-art-engine/script.module.js",
    "funebra/shapes": "https://funebra.github.io/math-art-engine/script.shapes.module.js",
    "funebra/realism": "https://funebra.github.io/math-art-engine/script.realism.module.js"
  }
}
</script>
<style>
  html,body{margin:0;height:100%;background:#0b0d12;overflow:hidden}
  #stage{width:100%;height:100%}
  #hud{position:fixed;top:10px;left:10px;z-index:10;
       color:#ff6600;font:14px system-ui,Segoe UI,Roboto;}
</style>
</head>
<body>
<canvas id="stage"></canvas>
<div id="hud">Funebra™ Mews PNG Render</div>

<script type="module">
import * as THREE from 'three';
import * as Funebra from 'funebra';
import * as Shapes from 'funebra/shapes';
import * as Realism from 'funebra/realism';

// ── Scene setup ──────────────────────────────
const canvas = document.getElementById('stage');
const renderer = new THREE.WebGLRenderer({canvas,antialias:true,preserveDrawingBuffer:true});
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setClearColor(0x0b0d12);

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(40, innerWidth/innerHeight, 0.1, 1000);
camera.position.set(0, 0, 250);

const light = new THREE.DirectionalLight(0xff6600, 1.0);
light.position.set(0, 100, 200);
scene.add(light);
scene.add(new THREE.AmbientLight(0x404040));

// ── Geometry: Mews Head + Shoulders Point Cloud ──
const points = await (await fetch('./head_shoulders_points.csv')).text();
const rows = points.trim().split(/\\n+/).slice(1).map(r => r.split(',').map(Number));
const geom = new THREE.BufferGeometry().setFromPoints(rows.map(([x,y,z]) => new THREE.Vector3(x,y,z)));
const mat = new THREE.PointsMaterial({
  size: 1.4, color: 0xffcc88, opacity:0.95, transparent:true
});
const cloud = new THREE.Points(geom, mat);
scene.add(cloud);

// ── Render + Export PNG ───────────────────────
renderer.render(scene, camera);
Funebra.Export.PNG(renderer.domElement, 'Funebra_Mews.png');
</script>
</body>
</html>
